{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/mohammad-taha/Taha/github/SimPhone/src/components/Simulator.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\n\nexport default function PhoneWithCustomScroll({ src }) {\n  const frameRef = useRef(null);\n  const [canControl, setCanControl] = useState(false);\n  const [metrics, setMetrics] = useState({ scrollTop: 0, scrollHeight: 1, clientHeight: 1 });\n  const [drag, setDrag] = useState({ active: false, startY: 0, startTop: 0 });\n\n  // تلاش برای دسترسی به داخل iframe (فقط اگر هم‌دامنه باشد موفق می‌شود)\n  useEffect(() => {\n    const id = setInterval(() => {\n      try {\n        const doc = frameRef.current?.contentDocument || frameRef.current?.contentWindow?.document;\n        if (!doc) return;\n        // اگر دسترسی داشتیم، متریک‌ها را بخوانیم\n        const el = doc.scrollingElement || doc.documentElement || doc.body;\n        setCanControl(true);\n        setMetrics({\n          scrollTop: el.scrollTop,\n          scrollHeight: el.scrollHeight,\n          clientHeight: el.clientHeight,\n        });\n      } catch {\n        setCanControl(false);\n      }\n    }, 200);\n    return () => clearInterval(id);\n  }, []);\n\n  // sync در اسکرول (برای هم‌دامنه)\n  useEffect(() => {\n    if (!canControl) return;\n    const w = frameRef.current.contentWindow;\n    const handler = () => {\n      try {\n        const doc = frameRef.current.contentDocument || w.document;\n        const el = doc.scrollingElement || doc.documentElement || doc.body;\n        setMetrics({\n          scrollTop: el.scrollTop,\n          scrollHeight: el.scrollHeight,\n          clientHeight: el.clientHeight,\n        });\n      } catch {}\n    };\n    w.addEventListener(\"scroll\", handler, { passive: true });\n    return () => w.removeEventListener(\"scroll\", handler);\n  }, [canControl]);\n\n  const ratio = Math.min(1, metrics.clientHeight / metrics.scrollHeight);\n  const trackHeight = 300; // px — می‌تونی دلخواه کنی\n  const thumbHeight = Math.max(30, trackHeight * ratio);\n  const maxThumbTop = trackHeight - thumbHeight;\n  const maxScrollTop = Math.max(1, metrics.scrollHeight - metrics.clientHeight);\n  const thumbTop = maxThumbTop * (metrics.scrollTop / maxScrollTop);\n\n  const scrollToThumbTop = (newThumbTop) => {\n    if (!canControl) return;\n    const clamped = Math.max(0, Math.min(maxThumbTop, newThumbTop));\n    const perc = clamped / maxThumbTop;\n    const newScrollTop = perc * maxScrollTop;\n    try {\n      frameRef.current.contentWindow.scrollTo({ top: newScrollTop, behavior: \"auto\" });\n    } catch {}\n  };\n\n  const onTrackClick = (e) => {\n    const track = e.currentTarget.getBoundingClientRect();\n    const clickY = e.clientY - track.top;\n    scrollToThumbTop(clickY - thumbHeight / 2);\n  };\n\n  const onThumbMouseDown = (e) => {\n    setDrag({ active: true, startY: e.clientY, startTop: thumbTop });\n    e.preventDefault();\n  };\n\n  useEffect(() => {\n    const onMove = (e) => {\n      if (!drag.active) return;\n      const delta = e.clientY - drag.startY;\n      scrollToThumbTop(drag.startTop + delta);\n    };\n    const onUp = () => setDrag((d) => ({ ...d, active: false }));\n    window.addEventListener(\"mousemove\", onMove);\n    window.addEventListener(\"mouseup\", onUp);\n    return () => {\n      window.removeEventListener(\"mousemove\", onMove);\n      window.removeEventListener(\"mouseup\", onUp);\n    };\n  }, [drag.active, drag.startY, drag.startTop]);\n\n  return (\n    <div className=\"relative flex items-center justify-center p-6\">\n      <div className=\"relative w-[420px] h-[890px] rounded-[60px] border-[14px] border-black bg-black shadow-[0_0_20px_rgba(0,0,0,0.2)] overflow-visible\">\n        {/* notch */}\n        <div className=\"absolute top-0 left-1/2 -translate-x-1/2 w-[150px] h-[35px] bg-black rounded-b-[22px] z-10\" />\n\n        {/* side buttons (دکوری) */}\n        <div className=\"absolute right-[-17px] top-[180px] w-[10px] h-[100px] bg-[#424242] rounded-[4px] border border-[#424242] cursor-pointer\" />\n        <div className=\"absolute left-[-17px] top-[120px] w-[10px] h-[40px] bg-[#424242] rounded-[4px] border border-[#424242] cursor-pointer\" />\n        <div className=\"absolute left-[-17px] top-[180px] w-[10px] h-[60px] bg-[#424242] rounded-[4px] border border-[#424242] cursor-pointer\" />\n        <div className=\"absolute left-[-17px] top-[250px] w-[10px] h-[60px] bg-[#424242] rounded-[4px] border border-[#424242] cursor-pointer\" />\n\n        {/* screen */}\n        <iframe\n          ref={frameRef}\n          src={src}\n          className=\"w-full h-full border-0 rounded-[48px] overflow-hidden\"\n        />\n\n        {/* indicator bar */}\n        <div className=\"absolute bottom-3 left-1/2 -translate-x-1/2 w-[120px] h-[6px] bg-[#525253] rounded-[3px] opacity-80\" />\n\n        {/* custom scrollbar (shows only if we can control) */}\n        {canControl ? (\n          <div className=\"absolute right-2 top-1/2 -translate-y-1/2 h-[300px] w-[6px] bg-white/10 rounded-full cursor-pointer\"\n               onMouseDown={onTrackClick} onClick={onTrackClick}>\n            <div\n              className=\"absolute left-0 w-[6px] bg-white/70 rounded-full\"\n              style={{ height: `${thumbHeight}px`, top: `${thumbTop}px`, cursor: \"grab\" }}\n              onMouseDown={onThumbMouseDown}\n            />\n          </div>\n        ) : (\n          // پیام کوچک برای کراس اوریجین\n          <div className=\"absolute right-2 top-2 text-[10px] text-white/60 px-2 py-1 bg-black/40 rounded\">\n            Custom scroll فقط برای هم‌دامنه عمل می‌کنه\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///home/mohammad-taha/Taha/github/SimPhone/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}}]
}